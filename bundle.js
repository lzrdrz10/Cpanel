var cblocal=function(){"use strict";function E(e){const t=document.createElement("div");let n="";t.className="border border-zinc-200 border-t-0";for(const r in e)if(Object.hasOwnProperty.call(e,r)){const o=e[r];n+=`
            <input name="${r}" value="${o}" class=" border-b border-r last:border-r-0 border-zinc-200 p-3 w-full outline-none" />
            `}return t.innerHTML=`<div class="flex">${n}</div>`,t}function f(e){const t=e.querySelectorAll("input, select, textarea"),n={};return[...t].forEach(r=>{const o=r.name,i=r.value;o=="genres"?n[o]=i?i.split(",").map(s=>s.trim()):[]:i=="true"?n[o]=!0:i=="false"?n[o]=!1:n[o]=i}),n}function S(){const e=document.querySelectorAll(".dynamic-insert#embed-link > div"),t=[];return[...e].forEach(n=>{t.push(f(n))}),t}function L(){const e=document.querySelectorAll(".dynamic-insert#dl > div"),t=[];return[...e].forEach(n=>{t.push(f(n))}),t}function C(){[...document.querySelectorAll(".dynamic-data")].forEach(t=>{const n=t.querySelector(".dynamic-fields"),r=t.querySelector(".dynamic-insert");if(!n)return;n.querySelector("button").addEventListener("click",()=>{const i=f(n),s=n.querySelectorAll("input");r.appendChild(E(i)),[...s].forEach(c=>{c.value=""})})})}const T=e=>{const t=document.createRange(),n=window.getSelection(),r=document.createElement("pre");r.style.whiteSpace="pre-wrap",r.textContent=e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),document.body.appendChild(r),t.selectNodeContents(r),n.removeAllRanges(),n.addRange(t);try{document.execCommand("copy")}catch(o){console.error("Error al copiar al portapapeles:",o)}n.removeAllRanges(),document.body.removeChild(r)};function N(e){const t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("pre"),o=document.createElement("div"),i=document.createElement("h2"),s=document.createElement("button"),c=document.createElement("div"),a=document.createElement("button");return t.className="fixed left-0 top-0 w-full h-full z-50 bg-black/50 grid grid-cols-1 place-content-center",n.className="w-[90%] max-w-[600px] bg-white shadow-lg rounded-md p-4 mx-auto",r.className="w-full bg-zinc-100 text-zinc-800 rounded p-4 overflow-auto max-h-56 text-sm font-medium focus:outline-indigo-500",o.className="text-right mb-4 flex items-center gap-4 justify-between",i.className="text-lg font-semibold text-zinc-800",s.className="text-red-500 hover:bg-red-100 rounded-lg cursor-pointer w-10 h-10 inline-grid place-content-center",c.className="text-right",a.className="bg-indigo-500 text-white inline-flex items-center gap-4 p-4 py-2 mt-2 leading-none text-sm font-semibold rounded",i.innerHTML="C\xF3digo generado",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="pointer-events-none"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg> copiar',r.textContent=e.trim(),s.addEventListener("click",()=>{t.remove()}),a.addEventListener("click",function(){const d=r.innerHTML;a.className="bg-indigo-500 text-white inline-flex items-center gap-4 p-4 py-2 mt-2 leading-none text-sm font-semibold rounded duration-200 !bg-green-600",a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"/></svg> copiado',T(d),setTimeout(()=>t.remove(),500)}),o.appendChild(i),o.appendChild(s),n.appendChild(o),n.appendChild(r),c.appendChild(a),n.appendChild(c),t.appendChild(n),t}function A(e,t){return e.replace(/\{(\w+)\}/g,function(n){const r=n.replace(/\{|\}/g,"");return t[r]||""})}function $(e,t){return e.replace(/{if(\.\w+\s)[^]*?\/}/g,function(n){const r=n.match(/if.\w+/)[0].replace("if.","");return t[r]?n.replace(/{if.\w+|\/\}/g,""):""})}function M(e,t){return e.replace(/{else(\.\w+\s)[^]*?\/}/g,function(n){const r=n.match(/else.\w+/)[0].replace("else.","");return t[r]?"":n.replace(/{else.\w+|\/\}/g,"")})}function q(e,t){return e.replace(/\{image(.+)\}/g,function(n){const r=n.replace(/\{image|\(|\)|\}/g,"");return t.thumbnail?t.thumbnail.replace(/s\B\d{2,4}(-?w\d{2,4})?-c/,r):""})}function z(e,t){function n(o,i){return i.some(s=>o.includes(s))}function r(o){const i=o.replace(/\[(.+)\]/g,""),s=o.replace(/include|exclude|remove|\[|\]/g,"").split(",").map(c=>c.trim());return{action:i.trim(),params:s}}return e.replace(/{loop\.(.+\s)[^]*?\/}/g,function(o){let i="";const{action:s,params:c}=/\((.+)\)/.test(o)?r(o.match(/\((.+)\)/)[1]):{},a=o.match(/loop.\w+/)[0].replace("loop.",""),d=o.replace(/{loop\.(.+\s)|\/}/g,"");if(t[a]){const p=t[a];return s=="remove"?p.filter(l=>!c.includes(l)).forEach((l,u)=>{i+=d.replace(/@value/g,l).replace(/@index/g,u+1)}):s=="include"?p.filter(l=>n(l,c)).forEach((l,u)=>{i+=d.replace(/@value/g,l).replace(/@index/g,u+1)}):s=="exclude"?p.filter(l=>!n(l,c)).forEach((l,u)=>{i+=d.replace(/@value/g,l).replace(/@index/g,u+1)}):p.forEach((l,u)=>{i+=d.replace(/@value/g,l).replace(/@index/g,u+1)}),i}else return""})}function F(e,t){let n=A(e,t);return[$,M,z,q].forEach(o=>{n=o(n,t)}),n}function H(){const e=document.body,t=document.querySelector(".tmdb-wrapper"),n=document.querySelector(".builder-fields"),r=window.template,o=document.querySelector("#generate-html");o&&o.addEventListener("click",function(){const i=f(n),s=S(),c=L(),a=t.getAttribute("data-set-template"),d=r[a],p=window["template.download:fn"],l=p(c),u=window["template.server:fn"],m=u(s);e.appendChild(N(F(d,{...i,download:l,server:m})))})}function B(){const e=document.querySelectorAll(".tabs button"),t=document.querySelectorAll(".tabs-element");e&&[...e].forEach(n=>{n.addEventListener("click",function(){const r=n.getAttribute("data-id"),o=document.getElementById(r);o&&([...t].forEach(i=>i.classList.remove("is-visible")),[...e].forEach(i=>i.classList.remove("is-selected")),n.classList.add("is-selected"),o.classList.add("is-visible"))})})}const D=typeof window.api_key>"u"?"7138665afbe3cee15f3695ae4fb61ce1":window.api_key,I=typeof window.api_lang>"u"?"es-MX":window.api_key,R=typeof window.poster_size>"u"?"w500":window.poster_size,Y=typeof window.backdrop_size>"u"?"w1280":window.backdrop_size,g=D,h=I,P=R,v=Y;function U(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function b(e,t,n){const r=e.querySelector("p");r&&r.remove();const o=document.createElement("p");o.className="border-l-4 border-zinc-600 text-white p-4 mb-2 text-sm font-semibold",o.innerHTML=n,U(t,o)}function V(e){const t=e.querySelector("p");t&&t.remove()}function y(e){return e.match(/\/\d+\-?/g)?e.match(/\/\d+\-?/g)[0].replace(/\/|-/g,""):e}function G(e){if(!(typeof e>"u"))for(let t=0;t<e.length;t++){const n=e[t];if(n.certification!="")return n.certification}}function J(e){const t=e.find(n=>n.type=="Trailer"&&n.site=="YouTube");return typeof t>"u"?"":t.key}async function _(e){let t="";const n=`https://api.themoviedb.org/3/${e.type}/${e.id}?api_key=${e.key}&language=${e.lang}`,r=`https://api.themoviedb.org/3/${e.type}/${e.id}/videos?api_key=${e.key}&language=${e.lang}`;e.type=="tv"?t=`https://api.themoviedb.org/3/tv/${e.id}/content_ratings?api_key=${e.key}&language=US`:e.type=="movie"&&(t=`https://api.themoviedb.org/3/movie/${e.id}/release_dates?api_key=${e.key}&language=US`);const o=await fetch(n),i=await fetch(r),s=await fetch(t),c=await o.json(),a=await s.json(),d=await i.json(),p=a.results?.find(m=>m.iso_3166_1=="US")??{},l=G(p.release_dates);return{...c,rating:l||p.rating||"",trailer_id:J(d.results)}}function k(e,t){if(!e)return;[...e.querySelectorAll("input, textarea")].forEach(o=>{const i=o.id;t[i]&&(o.value=t[i]??o.value)})}function W(e){var t=e,n=Math.floor(t/60),r=Math.floor(t%60);return t?(n?n+"h ":"")+r+"m":"N/A"}function w(e,t="w500",n="w1280"){function r(i){return new Date(i).getFullYear()}function o(i){if(!i)return[];let s=[];return i.forEach(c=>{if(c.name.includes(" & ")){const a=c.name.split(" & ");s=s.concat(a)}else s.push(c.name)}),s}return{title:e.title??e.name??e.original_name??e.original_title??"no-title",original_title:e.original_name??e.original_title??"no-name",poster_image:`https://www.themoviedb.org/t/p/${t}`+(e.poster_path??""),backdrop_image:`https://www.themoviedb.org/t/p/${n}`+(e.backdrop_path??""),seasons:e.number_of_seasons??1,episodes:e.number_of_episodes??1,year:r(e.first_air_date??e.release_date)??1900,release_data:e.first_air_date??e.release_date??"n/a",runtime:W(e.episode_run_time?e.episode_run_time[0]:e.runtime),date_last:e.last_air_date??"n/a",imdb:e.vote_average,status:typeof e.in_production<"u"?"on":"off",rating:e.rating,synopsis:e.overview??"n/a",status_movie:e.status??"n/a",tagline:e.tagline??"n/a",genres:o(e.genres),vote_count:e.vote_count,trailer_id:e.trailer_id||"none"}}async function X(e,t,n="w780"){const r=document.querySelector(".tmdb-wrapper input"),o=y(r.value),i=await _({id:o,type:"tv",key:g,lang:h}),s=w(i);return{title:e,original_title:s.original_title,year:s.year,episode_name:t?.name||e,episode:t?.episode_number||0,season:t?.season_number||0,id:s.id,imdb:s.imdb,runtime:s.runtime??i.episode_run_time??"0m",episode_image:`https://www.themoviedb.org/t/p/${n}`+t.still_path,synopsis:t.overview??"n/a",serie_synopsis:s.synopsis??"",poster_image:s.poster_image}}function x(e,t=1){const n=document.createElement("div"),r=document.createElement("button"),o=document.createElement("div"),i=t==1?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-50"><path d="m15 18-6-6 6-6"></path></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-50"><path d="m11 17-5-5 5-5"></path><path d="m18 17-5-5 5-5"></path></svg>';return n.className="bg-zinc-800 w-[320px] p-6 fixed left-0 top-0 h-full z-80 overflow-auto",r.className="mb-8 flex items-center gap-3 text-sm font-semibold",o.className="flex flex-col gap-2",r.innerHTML=`${i} back`,n.appendChild(r),o.appendChild(e),n.appendChild(o),r.addEventListener("click",()=>n.remove()),n}function K(e){const t=document.createElement("div"),{seasons:n}=e;return t.className="flex flex-col gap-2",n.forEach(r=>{const o=document.createElement("button");o.setAttribute("data-tmdb-id",e.id),o.setAttribute("data-current-season",r.season_number),o.setAttribute("data-episode-count",r.episode_count),o.className="border border-zinc-700 text-white hover:bg-zinc-700/20 duration-300 p-4 text-sm font-semibold rounded w-full block text-left hover:translate-x-1",o.innerHTML=`Temporada ${r.season_number} <span class="opacity-80 block text-xs pointer-events-none">episodios: ${r.episode_count}</span>`,t.appendChild(o)}),t}function Q(e){const{eps:t}=e,n=document.createElement("button");return n.setAttribute("data-title",t.title),n.setAttribute("data-tmdb-id",t.tmdbId),n.setAttribute("data-season-number",t.currentSeason),n.setAttribute("data-episode-number",e.episodeNumber),n.className="border border-zinc-700 text-white hover:bg-zinc-700/20 duration-300 p-4 text-sm font-semibold rounded w-full block text-left hover:translate-x-1",n.innerHTML=`Episodio ${e.episodeNumber}`,n}function Z(e){const t=[];for(let n=1;n<=e;n++)t.push(n);return t}function j(e,t){const r=Z(e.episodeCount),o=document.createElement("div"),i=document.querySelector(".builder-fields");o.className="flex flex-col gap-2",r.forEach((c,a)=>{o.appendChild(Q({eps:e,episodeNumber:a+1}))});const s=Array.from(o.querySelectorAll("button"));for(let c=0;c<s.length;c++){const a=s[c];a.addEventListener("click",async function(){const d=a.innerHTML,{tmdbId:p,seasonNumber:l,episodeNumber:u,title:m}=a.dataset;a.innerHTML="Cargando...";const oe=`https://api.themoviedb.org/3/tv/${p}/season/${l}/episode/${u}?api_key=${g}&language=${h}`,re=await(await fetch(oe)).json();a.innerHTML=d,a.style="pointer-events: none;opacity: 0.5;user-select: none;",k(i,await X(m,re,v))})}t.appendChild(x(o,2))}function O(e,t){const n=K(e),r=x(n);n.querySelectorAll("button").forEach(i=>{const s=i.dataset;i.addEventListener("click",()=>{j({title:w(e).title,tmdbId:e.id,currentSeason:s.currentSeason,episodeCount:s.episodeCount},t)})}),t.appendChild(r)}function ee(e){const t=e.target;t.value!==""&&t.select()}function te(){const e=document.querySelector(".aside-canvas"),t=document.querySelector(".builder-fields"),n=document.querySelector(".tmdb-wrapper"),r=n.querySelector("input"),o=document.querySelector("#tmdb-load-data");o&&(r.addEventListener("click",ee),o.addEventListener("click",async function(){const i=n.getAttribute("data-type");if(g==""){b(n,r,"Debes agregar la clave de api!");return}if(r.value==""){b(n,r,"Debes agregar la url o el ID de themobiedb.org");return}V(n);const s=await _({type:i=="episode"?"tv":i,id:y(r.value),key:g,lang:h});i=="episode"?O(s,e):k(t,w(s,P,v))}))}var ne=(()=>{H(),te(),B(),C()})();return ne}();